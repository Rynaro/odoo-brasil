<?xml version="1.0"?>
<odoo>

    <report
        id="report_br_nfse_danfe_ginfes"
        string="Nota de Serviço - Ginfes"
        model="invoice.eletronic"
        report_type="qweb-html"
        file="br_nfse.main_template_br_nfse_danfe_ginfes"
        name="br_nfse.main_template_br_nfse_danfe_ginfes" />

    <record id="report_br_nfse_danfe_ginfes" model="ir.actions.report.xml">
        <field name="paperformat_id" ref="paperformat_br_nfse_danfse"/>
        <field name="name">Nota de Serviço - Ginfes</field>
    </record>

    <template id="danfse_report_template_ginfes">
        <div class="page">
            <style type="text/css">
                .col-xs-1, .col-xs-2,
                .col-xs-3,.col-xs-4,.col-xs-5, .col-xs-6, .col-xs-7,
                .col-xs-8,
                .col-xs-9, .col-xs-10, .col-xs-11, .col-xs-12 {
                    padding:0px;
                }
                td, th { padding: 0 4px; }
                .bt { border-top: 1px solid black; }
                .bb { border-bottom: 1px solid black; }
                .bl { border-left: 1px solid black; }
                .br { border-right: 1px solid black; }
                div.completa { border: 1px solid black; }
                .rotulo { padding: 8px 0px; font-size: 12px; background-color: #d6d6d6; text-align:center; }
                .linha {  height:33px; padding: 5px 0px; }
            </style>
            <div class="row completa">
                <div class="col-xs-2">
                    <img src="/br_nfse/static/src/img/ribeirao-preto.png" alt="Logo Prefeitura Ribeirão Preto"
                        style="max-height:80px; margin-top:4px; margin-left:10px;" />
                </div>
                <div class="col-xs-7 br" style="padding:0px;text-align:center;font-size:20px;">
                    Prefeitura do Município de Ribeirão Preto
                    <br />
                    Secretaria Municipal da Fazenda
                    <br />
                    NOTA FISCAL ELETRÔNICA DE SERVIÇO - NFSe
                </div>
                <div class="col-xs-3" style="padding:0px;">
                    <div style="padding: 3px; text-align:center;">
                        <span style="font-size:9px;">Número da NFS-e</span><br />
                        <strong t-field="doc.numero_nfse"></strong>
                    </div>
                </div>
            </div>
            <div class="row" style="border: 1px solid black; padding: 0px;">
                <div class="col-xs-2 rotulo br">
                    Data e Hora da Emissão
                </div>
                <div class="col-xs-2 linha br">
                    <span t-field="doc.data_emissao" />
                </div>
                <div class="col-xs-2 rotulo br">
                    Competência
                </div>
                <div class="col-xs-2 linha br">
                    <span t-field="doc.data_emissao" />
                </div>
                <div class="col-xs-2 rotulo br">
                    Código de Verificação
                </div>
                <div class="col-xs-2 linha">
                    <span t-field="doc.verify_code" />
                </div>
            </div>
            <div class="row" style="border: 1px solid black; padding: 0px;">
                <div class="col-xs-2 rotulo br">
                    Número do RPS
                </div>
                <div class="col-xs-2 linha br">
                    <span t-field="doc.data_emissao" />
                </div>
                <div class="col-xs-2 rotulo br">
                    No. da NFS-e substituída
                </div>
                <div class="col-xs-2 linha br">
                    <span t-field="doc.data_emissao" />
                </div>
                <div class="col-xs-2 rotulo br">
                    Local da Prestação
                </div>
                <div class="col-xs-2 linha">
                    <span t-field="doc.verify_code" />
                </div>
            </div>
            <div class="row" style="border: 1px solid black; padding: 0px;">
                <div class="col-xs-12 rotulo">
                    <h4 style="margin:0px;">Dados do Prestador de Serviços</h4>
                </div>
            </div>
            <div class="row" style="border: 1px solid black; padding: 0px;">
                <div class="col-xs-2">
                    <img style="max-height:200px;margin-top:15px;max-width:140px;"
                        t-att-src="'data:image/png;base64,%s' % doc.company_id.logo" /><br />
                </div>
                <div class="col-xs-10">
                    <div class="row bb">
                        <div class="col-xs-2 rotulo br">
                            Razão Social/Nome
                        </div>
                        <div class="col-xs-10 linha br">
                            <span t-field="doc.data_emissao" />
                        </div>
                    </div>
                    <div class="row bb">
                        <div class="col-xs-2 rotulo br">
                            Nome Fantasia
                        </div>
                        <div class="col-xs-10 linha br">
                            <span t-field="doc.data_emissao" />
                        </div>
                    </div>
                    <div class="row bb">
                        <div class="col-xs-2 rotulo br">
                            CNPJ/CPF
                        </div>
                        <div class="col-xs-2 linha br">
                            <span t-field="doc.company_id.cnpj_cpf" />
                        </div>
                        <div class="col-xs-2 rotulo br">
                            Inscrição Municipal
                        </div>
                        <div class="col-xs-2 linha br">
                            <span t-field="doc.company_id.inscr_mun" />
                        </div>
                        <div class="col-xs-2 rotulo br">
                            Município
                        </div>
                        <div class="col-xs-2 linha br">
                            <span t-field="doc.data_emissao" />
                        </div>
                    </div>
                    <div class="row bb">
                        <div class="col-xs-2 rotulo br">
                            Endereço e Cep
                        </div>
                        <div class="col-xs-10 linha br">
                            <span t-field="doc.company_id.partner_id.street" />
                            <span t-field="doc.company_id.partner_id.number" />
                            <span t-field="doc.company_id.partner_id.district" />
                        </div>
                    </div>
                    <div class="row bb">
                        <div class="col-xs-2 rotulo br">
                            Complemento:
                        </div>
                        <div class="col-xs-2 linha br">
                            <span t-field="doc.company_id.cnpj_cpf" />
                        </div>
                        <div class="col-xs-2 rotulo br">
                            Telefone:
                        </div>
                        <div class="col-xs-2 linha br">
                            <span t-field="doc.company_id.inscr_mun" />
                        </div>
                        <div class="col-xs-2 rotulo br">
                            e-mail:
                        </div>
                        <div class="col-xs-2 linha br">
                            <span t-field="doc.data_emissao" />
                        </div>
                    </div>
                </div>
            </div>
            <div class="row" style="border: 1px solid black; padding: 0px;">
                <div class="col-xs-12 rotulo">
                    <h4 style="margin:0px;">Dados do Tomador de Serviços</h4>
                </div>
            </div>
            <div class="row bb">
                <div class="col-xs-2 rotulo br">
                    Razão Social/Nome
                </div>
                <div class="col-xs-10 linha br">
                    <span t-field="doc.data_emissao" />
                </div>
            </div>
            <div class="row bb">
                <div class="col-xs-2 rotulo br">
                    CNPJ/CPF
                </div>
                <div class="col-xs-2 linha br">
                    <span t-field="doc.company_id.cnpj_cpf" />
                </div>
                <div class="col-xs-2 rotulo br">
                    Inscrição Municipal
                </div>
                <div class="col-xs-2 linha br">
                    <span t-field="doc.company_id.inscr_mun" />
                </div>
                <div class="col-xs-2 rotulo br">
                    Município
                </div>
                <div class="col-xs-2 linha br">
                    <span t-field="doc.data_emissao" />
                </div>
            </div>
            <div class="row bb">
                <div class="col-xs-2 rotulo br">
                    Endereço e Cep
                </div>
                <div class="col-xs-10 linha br">
                    <span t-field="doc.commercial_partner_id.street" />
                    <span t-field="doc.commercial_partner_id.number" />
                    <span t-field="doc.commercial_partner_id.district" />
                </div>
            </div>
            <div class="row bb">
                <div class="col-xs-2 rotulo br">
                    Complemento:
                </div>
                <div class="col-xs-2 linha br">
                    <span t-field="doc.company_id.cnpj_cpf" />
                </div>
                <div class="col-xs-2 rotulo br">
                    Telefone:
                </div>
                <div class="col-xs-2 linha br">
                    <span t-field="doc.company_id.inscr_mun" />
                </div>
                <div class="col-xs-2 rotulo br">
                    e-mail:
                </div>
                <div class="col-xs-2 linha br">
                    <span t-field="doc.data_emissao" />
                </div>
            </div>
            <div class="row" style="border: 1px solid black; padding: 0px;">
                <div class="col-xs-12 rotulo">
                    <h4 style="margin:0px;">Discriminação dos serviços</h4>
                </div>
            </div>
            <div class="row" style="border: 1px solid black;padding: 0 0 5px 5px; min-height:150px;">
                <div class="col-xs-12">
                    <t t-foreach="doc.eletronic_item_ids" t-as="line">
                        <p t-field="line.name"></p>
                    </t>
                    <span t-field="doc.informacoes_legais"></span>
                    <span t-field="doc.informacoes_complementares"></span>
                </div>
            </div>
            <div class="row" style="border: 1px solid black; padding: 0px;">
                <div class="col-xs-12 rotulo">
                    <h4 style="margin:0px;">Código do Serviço / Atividade</h4>
                </div>
            </div>
            <div class="row" style="border: 1px solid black; padding: 0px;">
                <div class="col-xs-12">
                    <span>1.07 / 01.07.00 / 00010700 - SUPORTE TECNICO EM INFORMATICA, INCLUSIVE INSTALACAO, CONFIGURACAO E MANUTENCA O DE PROGRAMAS DE CO</span>
                </div>
            </div>
            <div class="row" style="border: 1px solid black; padding: 0px;">
                <div class="col-xs-12 rotulo">
                    <h4 style="margin:0px;">Tributos Federais</h4>
                </div>
            </div>

            <div class="row bb">
                <div class="col-xs-1 linha br">
                </div>
                <div class="col-xs-1 rotulo br">
                    PIS
                </div>
                <div class="col-xs-1 linha br">
                    <span t-field="doc.company_id.inscr_mun" />
                </div>
                <div class="col-xs-1 rotulo br">
                    COFINS
                </div>
                <div class="col-xs-1 linha br">
                    <span t-field="doc.data_emissao" />
                </div>
                <div class="col-xs-1 rotulo br">
                    IR(R$)
                </div>
                <div class="col-xs-1 linha br">
                    <span t-field="doc.company_id.cnpj_cpf" />
                </div>
                <div class="col-xs-1 rotulo br">
                    INSS(R$)
                </div>
                <div class="col-xs-1 linha br">
                    <span t-field="doc.company_id.inscr_mun" />
                </div>
                <div class="col-xs-1 rotulo br">
                    CSLL(R$)
                </div>
                <div class="col-xs-1 linha br">
                    <span t-field="doc.data_emissao" />
                </div>
            </div>

            <div class="row" style="border: 1px solid black;padding: 0px;">
                <div class="col-xs-6" style="border-right: 1px solid black;">
                    <span style="font-size:10px;">
                        Valor Aproximado de Impostos: Federais R$ 0,00 Estaduais R$ 0,00 Municipais R$ 0,00
                    </span>
                </div>
                <div class="col-xs-3" style="text-align:right;border-right: 1px solid black;">
                    <strong>VALOR LÍQUIDO DA NOTA </strong>
                </div>
                <div class="col-xs-3" style="text-align:right;">
                    <strong t-field="doc.valor_final"
                        t-field-options='{"widget": "monetary",  "display_currency": "doc.currency_id" }'></strong>
                </div>
            </div>
        </div>
    </template>

    <template id="main_template_br_nfse_danfe_ginfes">
        <t t-call="report.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="br_nfse.danfse_report_template_ginfes" t-lang="doc.partner_id.lang"/>
            </t>
        </t>
    </template>


</odoo>
